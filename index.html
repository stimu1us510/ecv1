<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">
    <script src="index.js" defer></script>
    <script src="modal.js" defer></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin=" anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <title>英語チャレンジ by 英会話サイモンズ</title>
    <link id="site-icon" rel="icon" href="https://cdn-icons-png.flaticon.com/512/1212/1212830.png" style="filter: invert(1);" type="image/icon type">
</head>
<body>

<!-- Modal -->
<div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header border-0 px-0">
        <h1 class="modal-title fs-5" id="exampleModalLabel"></h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <canvas id="confetticanvas"></canvas>
        <audio id="phraseaudio" src="https://simons.xsrv.jp/eigo/220729_010.mp3"></audio>
        <audio id="correctaudio" src="https://surasura-challenge.com/wpfiles/wp-content/uploads/2022/09/correctanswer4.wav"></audio>

        <div>
          <h3 id="japanese-phrase-plain"></h3>
        </div>
        ...
      </div>
      <div class="modal-footer">
        <button id="translateButton" class="btn btn-light btn-lg border border-dark"><i class="bi bi-lightbulb"></i></button>
        <button id="listenButton" class="btn btn-light btn-lg border border-dark"><i class="bi bi-play"></i></button>
        <button id="endSpeechButton" class="btn btn-outline-danger btn-lg hide"><i class="bi bi-mic-mute"></i></button>
        <button id="speechButton" class="btn btn-warning btn-lg"><img class="svg-icon" src="https://surasura-challenge.com/wpfiles/wp-content/uploads/2022/09/confetti.png" style="height:20px; width:20px;"></button>
        <button id="nextButton" class="btn btn-success btn-lg hide"><i class="bi bi-arrow-right-circle"></i></button>
      </div>
    </div>
  </div>
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container-xxl">
    <a class="navbar-brand mx-1" href="#"><img class="brand-img" style="max-height:30px;" src="https://softr-prod.imgix.net/applications/b5fedfc4-cd1f-43b7-954c-60ebbf13631a/assets/8bf6e5c1-bbd5-4442-9e19-74515017980c.png"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ms-auto mx-2">
        <li id="home-button"class="nav-item mx-3">
          <a class="nav-link" aria-current="page" href="#" onclick="showHero();return false;">Home</a>
        </li>
        <li id="dashboard-button"class="nav-item mx-3">
          <a class="nav-link" aria-current="page" href="#" onclick="">Dashboard</a>
        </li>
        <li class="nav-item mx-3">
          <a class="nav-link" href="#" onclick="getLockedSentences();return false;">Show All</a>
        </li>
        <li class="nav-item mx-3">
          <a class="nav-link" href="#">Collections</a>
        </li>
        <li class="nav-item mx-3">
          <a class="nav-link" href="#" onclick="toggleHelperTools();return false;">Helper Tools</a>
        </li>
        <li id="log-in-button" class="nav-item mx-3 d-none">
          <a class="nav-link btn btn-sm btn-outline-dark text-light" href="#" onclick="dispLogin();return false;"><b>Login</b></a>
        </li>
        <li id="sign-up-button" class="nav-item d-none">
          <a class="nav-link btn btn-sm btn-light text-dark" href="#" onclick="dispSignup();return false;"><b>Signup</b></a>
        </li>
        <li id="user-profile-dropdown" class="nav-item dropdown mx-3 d-none">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person fa-lg"></i>Profile
          </a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
            <li><a class="dropdown-item" href="#">My History</a></li>
            <li><a class="dropdown-item" href="#">Update Information</a></li>
            <div class="dropdown-divider"></div>
            <li><a class="dropdown-item d-flex justify-content-between" href="#" onclick="logout();return false;">Logout <i class="bi bi-box-arrow-right"></i></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div id="main-wrapper" class="container-xxl d-flex justify-content-start flex-column" style="height: 80vh;"> <!-- main-page wrapper for max-width -->
  
  <!-- temp helper tools  -->
  <div id="helper-tools" class="d-flex justify-content-center d-none">
    <div class="card">
        <div class="card-body" style="min-width: 400px;">
            <button class="btn btn-outline-dark w-100 mb-2" onclick="showKey()">See Key</button>
            <button class="btn btn-outline-dark w-100 mb-2" onclick="getLockedSentences()">Get Sentences</button>
            <button type="button" class="btn btn-outline-dark w-100 mb-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Launch demo modal
            </button>
        </div>
    </div>
  </div>

  <!-- error message to user -->
  <div class="d-flex justify-content-center p-2">
    <div id="fetching-data-loader" class="spinner-border hide d-none" role="status"></div>
    <div id="error-message-alert" class="alert alert-dark hide d-none" role="alert">
    <span id="error-message-text">There was a problem fetching the data.</span>
    </div>
  </div>

  <!-- Hero Section -->
  <div id="hero-section" class="container-xxl pt-5 d-none">
    <h1 class="d-flex justify-content-center flex-row align-items-center text-wrap lh-lg fw-bold fs-2 mb-5 text-dark">
      英語を聞いて、リピートするだけ。<br>心地よいレベルを、できるだけ毎日。
    </h1>
    <h6 class="text-center d-flex justify-content-center flex-row align-items-center text-wrap lh-lg fw-light fs-6 mb-5">
      ただし、英語の文字は見ずに、通じる発音で。<br>なかなか challenging ですね。<br>がんばりましょう！ 
    </h6>
    <div class="text-center d-flex flex-row d-flex justify-content-center align-items-center text-decoration-none">
      <div class="btn btn-outline-primary mx-2 mb-5" onclick="dispLogin();return false;">
        Learn More
      </div>
      <div class="btn btn-primary mx-2 mb-5" onclick="dispLogin();return false;">
        やってみる！ <i class="bi bi-arrow-right"></i>
      </div>
    </div>
    <div class="d-flex flex-column d-flex justify-content-center align-items-center">
      <img style="height: 35vh;" src="https://softr-prod.imgix.net/applications/b5fedfc4-cd1f-43b7-954c-60ebbf13631a/assets/de13da6a-2f9f-451c-ab00-aa830df2cffd.png">
    </div>
  </div>

  <div id="getAuth-forms" class="d-flex justify-content-center flex-column align-items-center h-100 d-none"> <!-- authforms wrapper -->
    <!-- signup forms -->
    <div id="signup-card" class="d-flex justify-content-center mb-1 d-none auth-form">
        <div class="card">
            <div class="card-body" style="min-width: 400px;">
            <form id="signup-form">
                <div class="d-flex justify-content-center mt-2 mb-3"><h3>Signup</h3></div>
                <div class="form-floating mb-3">
                    <input name="name" type="text" class="form-control" id="floatingInputNameSignup" placeholder="John-Doe">
                    <label for="floatingInput">Name</label>
                </div>
                <div class="form-floating mb-3">
                    <input name="email" type="email" class="form-control" id="floatingInputEmailSignup" placeholder="name@example.com">
                    <label for="floatingInput">Email address</label>
                </div>
                <div class="form-floating mb-3">
                    <input name="password" type="password" minlength="4" class="form-control" id="floatingPasswordSignup" placeholder="Password">
                    <label for="floatingPassword">Password</label>
                </div>
                <div class="mt-1 mb-3">
                    <button type="submit" class="btn btn-dark w-100">Signup</button>
                </div>
            </form>
            </div>  
        </div>
    </div>
    <div id="login-link" class="d-flex justify-content-center loginLink d-none">
      <span>Have an account? <a id="myLink" title="login"href="PleaseEnableJavascript.html" onclick="dispLogin();return false;">login</a></span>
    </div>

    <!-- login forms  -->
    <div id="login-card" class="d-flex justify-content-center mb-1">
        <div class="card">
            <div class="card-body" style="min-width: 400px;">
            <form id="login-form">
                <div class="d-flex justify-content-center mt-2 mb-3"><h3>Login</h3></div>
                <div class="form-floating mb-3">
                    <input name="email" type="email" class="form-control" id="floatingInputEmail" placeholder="name@example.com">
                    <label for="floatingInput">Email address</label>
                </div>
                <div class="form-floating mb-3">
                    <input name="password" type="password" minlength="4" class="form-control" id="floatingPassword" placeholder="Password">
                    <label for="floatingPassword">Password</label>
                </div>
                <div class="mt-1 mb-3">
                    <button type="submit" class="btn btn-dark w-100">Login</button>
                </div>
            </form>
            </div>      
        </div>
    </div>
    <div id="signup-link" class="d-flex justify-content-center signupLink">
      <span>Need an account? <a id="myLink" title="singup" href="PleaseEnableJavascript.html" onclick="dispSignup();return false;">signup</a></span>
    </div>
  </div> <!-- authforms wrapper end -->

  <!-- welcome message -->
  <div id="welcome-alert-container" class="d-flex justify-content-center d-none">
    <div class="alert alert-warning alert-dismissible fade show d-flex justify-content-center" 
    role="alert" style="max-width: 800px;">
        <strong class="px-5">Welcome Back <span id="welcome-user">...</span>!</strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  </div>

  <!-- user history w/score input  -->
  <div id="user-history-cont" class="d-none w-100 text-center">
    <h2>Your total score today is <span id="current-total-score">...</span> !</h2>

    <!-- seven day progress chart display -->
    <div id="seven-day-chart-containter" class="d-flex flex-column justify-content-center align-items-center mt-3">
      <h3 class="fc-grey fw-light">7 Day Progress</h3>
      <div class="chart-one-wrapper" style="width: 800px; height: auto;">
        <canvas id="myChartOne">Your browser does not support the canvas element.</canvas>
      </div>
    </div>

    <div class="container text-center">
      <div class="row">

        <div class="col">

          <!-- daily breakdown points per level chart display -->
          <div id="daily-dabreakdown-perlevel-containter" class="d-flex flex-column justify-content-center align-items-center mt-5">
            <h3 class="fc-grey fw-light">Daily Total Breakdown <span class="fs-5"><i>(points per level)</i></span></h3>
            <div class="chart-wrapper p-3" style="width: 400px; height: auto;">
              <canvas id="myChartTwo">Your browser does not support the canvas element.</canvas>
            </div>
          </div>

        </div>

        <div class="col">
          <!-- daily breakdown by level count -->
          <div id="daily-dabreakdown-levelcount-containter" class="d-flex flex-column justify-content-center align-items-center mt-5">
            <h3 class="fc-grey fw-light">Daily Total Breakdown <span class="fs-5"><i>(count of correct phrases by level)</i></span></h3>
            <div class="chart-wrapper p-3" style="width: 400px; height: auto;">
              <canvas id="myChartThree">Your browser does not support the canvas element.</canvas>
            </div>
          </div>
        </div>
      </div>

    </div>






    <!-- point entry form -->
    <div class="container-xl d-flex flex-row mt-4">
      <form id="point-form" class="">

        <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault" value="1" id="flexRadioDefault1" required>
            <label class="form-check-label" for="flexRadioDefault1">
            Award 1 point
            </label>
        </div>
        
        <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault" value="2" id="flexRadioDefault2" required>
            <label class="form-check-label" for="flexRadioDefault2">
            Award 2 points
            </label>
        </div>
        
        <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault" value="3" id="flexRadioDefault3" required>
            <label class="form-check-label" for="flexRadioDefault3">
            Award 3 points
            </label>
        </div>
        
        <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault" value="4" id="flexRadioDefault4" required>
            <label class="form-check-label" for="flexRadioDefault4">
            Award 4 points
            </label>
        </div>
        
        <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault" value="5" id="flexRadioDefault5" required>
            <label class="form-check-label" for="flexRadioDefault5">
            Award 5 points
            </label>
        </div>
          
        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" value="6" id="flexRadioDefault6" required>
          <label class="form-check-label" for="flexRadioDefault6">
          Award 6 points
          </label>
      </div>
        
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" value="7" id="flexRadioDefault7" required>
        <label class="form-check-label" for="flexRadioDefault7">
        Award 7 points
        </label>
      </div>
        
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" value="8" id="flexRadioDefault8" required>
        <label class="form-check-label" for="flexRadioDefault8">
        Award 8 points
        </label>
      </div>
        
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" value="9" id="flexRadioDefault9" required>
        <label class="form-check-label" for="flexRadioDefault9">
        Award 9 points
        </label>
      </div>
        
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" value="10" id="flexRadioDefault10" required>
        <label class="form-check-label" for="flexRadioDefault10">
        Award 10 points
        </label>
      </div>

      <button type="submit" class="btn btn-primary mt-4">Submit</button>

      </form>
    </div>
  </div>

  <!-- sentences -->
  <div id="sentences-container" class="mt-4 pt-2"></div>

  <!-- more sentences -->
  <div id="see-more-sentences-container" class="text-center d-none mb-5">
    <button id="show-more-button" class="btn btn-light hide border-1 shadow-sm">show more</button>
  </div>


  <div id="floating-buttons">      
    <div style="position: fixed; bottom: 0.4rem; right: 25px;">
    <div class="d-flex flex-column float-button-cont">
      <button id="goToTop" class="btn float-button mb-2 shadow d-none"><i class="bi bi-arrow-up"></i></button>
      <button id="randomizeButton" class="btn float-button mb-2 shadow d-none"><i class="bi bi-shuffle"></i></button>
    </div>
  </div>

</div> <!-- body wrapper end -->


<!-- Footer -->
<div id="footer" class="d-none">
  <div class="container-xxl d-none d-sm-block mb-1 p-0 m-0">
    <hr class="mt-0 mb-1">
    <!-- normal text md+ -->
    <ul class="list-group list-group-horizontal d-flex justify-content-center align-items-center">
      <li class="list-group-item border-0 fw-light">About</li>
      <li class="list-group-item border-0 fw-light">School</li>
      <li class="list-group-item border-0 fw-light">Help</li>
      <li class="list-group-item border-0 fw-light">Support</li>
      <li class="list-group-item border-0 fw-light">Terms</li>
      <li class="list-group-item border-0 fw-light">Privacy</li>
    </ul>
  </div>

  <div class="container-xxl d-block d-sm-none mb-3 p-0 m-0">
    <!-- small icons on sm -->
    <ul class="list-group list-group-horizontal d-flex justify-content-center align-items-center">
      <li class="list-group-item d-flex align-items-center border-0 d-block d-sm-none fw-light fs-6 px-2">About</li>
      <li class="list-group-item border-0 fw-light fs-6 px-2">School</li>
      <li class="list-group-item border-0 fw-light fs-6 px-2">Help</li>
      <li class="list-group-item border-0 fw-light fs-6 px-2">Support</li>
      <li class="list-group-item border-0 fw-light fs-6 px-2">Terms</li>
      <li class="list-group-item border-0 fw-light fs-6 px-2">Privacy</li>
    </ul>
  </div>
</div>

<script>
// -- chart data -- //

//chart one: last 7 day total points
let chartOneLableData = []
let chartOneChartData = []

const chartOneData = {
  labels: chartOneLableData,
  datasets: [{
    label: 'Daily Total Score',
    backgroundColor: 'rgb(255, 99, 132)',
    borderColor: 'rgb(255, 99, 132)',
    data: chartOneChartData,
  }]
}

const chartOneConfig = {
  type: 'line',
  data: chartOneData,
  options: {
    animation:{
      duration: 0
    }
  }
}


// chart 2: daily breakdown points per level
//let chartTwoChartData = [1,2,3,4,0,0,7,8,0,50]
let chartTwoChartData = [0,0,0,0,0,0,0,0,0,0]

const chartTwoData = {
  labels: ["Level One","Level Two","Level Three","Level Four","Level Five","Level Six","Level Seven","Level Eight","Level Nine","Level Ten",],
  datasets: [{
    label: 'daily breakdown by points per level',
    backgroundColor: [ 
      '#D6E6B3',
      '#C8DE9C',
      '#A7D685',
      '#8ACC66',
      '#73BF40',
      '#65AC39',
      '#4B9532',
      '#327A29',
      '#246B31',
      '#1C5425'],
    //borderColor: 'rgb(255, 99, 132)',
    data: chartTwoChartData,
  }]
}

const chartTwoConfig = {
  type: 'doughnut',
  data: chartTwoData,
  options: {
    animation:{
      duration: 0
    }
  }
}

// chart 3: daily breakdown number of correctly repeated phrases by level
let chartThreeChartData = [0,0,0,0,0,0,0,0,0,0]

const chartThreeData = {
  labels: ["1 point","2 points","3 points","4 points","5 points","6 points","7 points","8 points","9 points","10 points"],
  datasets: [{
    label: 'daily breakdown by points per level',
    backgroundColor: [ 
      '#F6E4F2',
      '#FBF4F4',
      '#F6E4EB',      
      '#EECDE9',
      '#D3B6E7',
      '#AE9FDF',      
      '#A594DB',
      '#9E85D6',
      '#9575D1',
      '#8C62CB'],
    //borderColor: 'rgb(255, 99, 132)',
    data: chartThreeChartData,
  }]
}

const chartThreeConfig = {
  type: 'doughnut',
  data: chartThreeData,
  options: {
    animation:{
      duration: 0
    }
  }
}
</script>

</body>
</html>